<h1 align="center">
    <img alt="logo" src="https://oscimg.oschina.net/oscnet/up-d3d0a9303e11d522a06cd263f3079027715.png">
</h1>
<h1 align="center" style="margin: 30px 0 30px; font-weight: bold;">RuoYi-Vue-FastAPI</h1>
<h4 align="center">基于RuoYi-Vue+FastAPI前后端分离的快速开发框架</h4>


## 平台简介

RuoYi-Vue-FastAPI是一套全部开源的快速开发平台，毫无保留给个人及企业免费使用。

* 前端采用Vue、Element UI，基于<u>[RuoYi-Vue](https://gitee.com/y_project/RuoYi-Vue)</u>前端项目修改。
* 移动端采用uni-app、Vue2，内置tailwindcss，基于<u>[RuoYi-App](https://github.com/yangzongzhuan/RuoYi-App)</u>项目修改。
* 后端采用FastAPI、sqlalchemy、MySQL（PostgreSQL）、Redis、OAuth2 & Jwt。
* 权限认证使用OAuth2 & Jwt，支持多终端认证系统。
* 支持加载动态权限菜单，多方式轻松权限控制。
* 特别鸣谢：<u>[RuoYi-Vue](https://gitee.com/y_project/RuoYi-Vue)</u>、<u>[RuoYi-App](https://github.com/yangzongzhuan/RuoYi-App)</u>

## 内置功能

1. 用户管理：用户是系统操作者，该功能主要完成系统用户配置。
2. 角色管理：角色菜单权限分配、设置角色按机构进行数据范围权限划分。
3. 菜单管理：配置系统菜单，操作权限，按钮权限标识等。
4. 部门管理：配置系统组织机构（公司、部门、小组）。
5. 岗位管理：配置系统用户所属担任职务。
6. 字典管理：对系统中经常使用的一些较为固定的数据进行维护。
7. 参数管理：对系统动态配置常用参数。
8. 通知公告：系统通知公告信息发布维护。
9. 操作日志：系统正常操作日志记录和查询；系统异常信息日志记录和查询。
10. 登录日志：系统登录日志记录查询包含登录异常。
11. 在线用户：当前系统中活跃用户状态监控。
12. 定时任务：在线（添加、修改、删除）任务调度包含执行结果日志。
13. 服务监控：监视当前系统CPU、内存、磁盘、堆栈等相关信息。
14. 缓存监控：对系统的缓存信息查询，命令统计等。
15. 在线构建器：拖动表单元素生成相应的HTML代码。
16. 系统接口：根据业务代码自动生成相关的api接口文档。
17. 代码生成：配置数据库表信息一键生成前后端代码（python、sql、vue、js），支持下载。
18. AI管理：提供AI模型管理和AI对话功能。

## ✨ 特色功能

### 🤖 AI 辅助开发

本项目内置完整的 AI 开发规则（`.kiro/steering/project-development-rules.md`），支持使用 Kiro 或其他 AI 助手进行智能开发：

- **自动创建数据库表**：描述需求，AI 自动生成符合规范的建表 SQL
- **一键生成代码**：AI 调用代码生成器，自动生成前后端完整代码
- **智能修改功能**：AI 理解业务逻辑，精准修改代码
- **保护框架完整性**：AI 严格遵循开发规范，不会修改核心文件
- **极速开发**：从需求到可用功能，只需几分钟

**使用示例：**

```
# 创建新模块
"创建一个产品管理模块，包含产品名称、编码、价格、状态等字段"

# 添加功能
"在订单模块中添加订单审核功能，审核通过后自动扣减库存"

# 修改字段
"给产品表添加库存字段，并在列表页显示"
```

详细使用方法请查看下方的 [🤖 AI 辅助开发指南](#-ai-辅助开发指南推荐) 章节。

### 🚀 代码生成器

系统内置强大的代码生成器，支持：

- **一键生成**：配置数据库表信息，一键生成前后端代码
- **完整功能**：自动生成增删改查、分页、导出、权限控制等功能
- **符合规范**：生成的代码完全符合项目规范
- **支持下载**：可下载代码包或直接生成到项目目录
- **模板可定制**：支持自定义代码生成模板

**使用方式：**

1. 登录系统管理后台
2. 访问：系统工具 -> 代码生成
3. 导入数据库表
4. 配置生成信息
5. 一键生成代码



## 🤖 AI 辅助开发指南（推荐）

### 使用 AI 快速创建新功能模块

本项目已配置完整的 AI 开发规则，可以使用 Kiro 或其他 AI 助手快速创建新功能模块，包括自动创建数据库表、生成前后端代码等。

#### 方式一：AI 自动创建表 + 代码生成器（最快）

这是最推荐的方式，AI 会帮你创建数据库表，然后使用系统内置的代码生成器生成完整的前后端代码。

**步骤：**

1. **告诉 AI 你的需求**

```
请帮我创建一个产品管理模块，包含以下字段：
- 产品名称（必填）
- 产品编码（唯一）
- 产品分类（下拉选择）
- 产品价格（数字）
- 产品状态（启用/停用）
- 产品描述（文本域）
```

2. **AI 会自动完成以下工作：**
   - ✅ 创建符合规范的数据库表（包含审计字段）
   - ✅ 生成建表 SQL 语句
   - ✅ 执行 SQL 创建表
   - ✅ 使用代码生成器生成前后端代码
   - ✅ 配置菜单和权限
   - ✅ 提供测试步骤

3. **你只需要：**
   - 重启后端服务
   - 刷新前端页面
   - 开始使用新功能

**示例对话：**

```
用户：创建一个订单管理模块，包含订单号、客户名称、订单金额、订单状态、下单时间等字段

AI：好的，我来帮你创建订单管理模块：

1. 首先创建数据库表 biz_order
2. 使用代码生成器生成代码
3. 配置菜单和权限

[AI 会自动执行所有步骤]

完成！订单管理模块已创建，包含：
- 后端 API：/business/order/list、/add、/edit、/remove
- 前端页面：订单列表、新增、编辑、删除、导出
- 权限配置：business:order:list、add、edit、remove、export
```

#### 方式二：AI 手动创建完整模块

如果你需要更多自定义逻辑，可以让 AI 手动创建完整的模块代码。

**步骤：**

1. **告诉 AI 你的需求**

```
请手动创建一个库存管理模块，需要包含：
- 库存查询（支持按产品名称、仓库模糊查询）
- 库存入库（需要校验产品是否存在）
- 库存出库（需要校验库存是否充足）
- 库存预警（库存低于阈值时标红显示）
```

2. **AI 会创建：**
   - ✅ 数据库表结构
   - ✅ DO 实体类（entity/do/）
   - ✅ VO 对象类（entity/vo/）
   - ✅ DAO 数据访问层（dao/）
   - ✅ Service 业务逻辑层（service/）
   - ✅ Controller API 接口层（controller/）
   - ✅ 自定义业务逻辑

3. **AI 会遵循的规范：**
   - 不修改框架核心文件
   - 使用标准的目录结构
   - 添加完整的类型注解
   - 包含事务处理和异常处理
   - 添加权限控制和日志记录
   - 使用统一的响应格式

#### 方式三：AI 修改现有模块

**步骤：**

1. **告诉 AI 你要修改的内容**

```
请在产品管理模块中添加以下功能：
1. 添加产品库存字段
2. 在列表页显示库存数量
3. 添加库存预警功能（库存<10时标红）
4. 添加批量导入产品功能
```

2. **AI 会：**
   - ✅ 修改数据库表（添加字段）
   - ✅ 更新 DO、VO 类
   - ✅ 修改 Service 和 DAO 层
   - ✅ 更新 Controller 接口
   - ✅ 添加新的业务逻辑

### AI 开发的优势

1. **极速开发**：从需求到可用功能，只需几分钟
2. **规范统一**：AI 严格遵循项目开发规范，代码风格一致
3. **零错误**：自动处理类型注解、事务、异常、权限等
4. **完整功能**：包含增删改查、分页、导出、权限控制等完整功能
5. **智能提示**：AI 会提醒你需要重启服务、配置菜单等步骤

### AI 开发注意事项

1. **明确需求**：尽量详细描述字段、功能、业务逻辑
2. **提供示例**：可以参考现有模块，如"参考岗位管理模块创建"
3. **分步进行**：复杂功能可以分多次对话完成
4. **及时测试**：每次修改后及时测试，发现问题及时反馈给 AI

### AI 可以帮你做什么

- ✅ 创建新的业务模块（产品、订单、库存等）
- ✅ 添加新字段和功能
- ✅ 修改业务逻辑
- ✅ 优化查询性能
- ✅ 添加数据校验
- ✅ 实现复杂的业务规则
- ✅ 修复 bug
- ✅ 代码重构
- ✅ 添加单元测试

### AI 不会做什么（受保护）

- ❌ 修改框架核心文件（common/、config/、utils/）
- ❌ 修改系统管理模块（module_admin/）
- ❌ 修改中间件和异常处理
- ❌ 修改数据库连接配置
- ❌ 修改路由注册机制

### 快速开始示例

**示例 1：创建简单的 CRUD 模块**

```
用户：创建一个分类管理模块，包含分类名称、分类编码、排序号、状态字段

AI：[自动创建表 + 生成代码 + 配置菜单]

完成！访问 http://localhost/business/category 即可使用
```

**示例 2：创建带关联的模块**

```
用户：创建一个文章管理模块，需要关联分类表，包含文章标题、作者、内容、封面图、发布时间等字段

AI：[创建表 + 配置外键 + 生成代码 + 添加关联查询]

完成！文章列表会显示分类名称，支持按分类筛选
```

**示例 3：添加复杂业务逻辑**

```
用户：在订单模块中添加订单审核功能，审核通过后自动扣减库存，审核拒绝后恢复库存

AI：[添加审核状态字段 + 实现审核逻辑 + 添加库存操作 + 添加事务处理]

完成！订单审核功能已添加，包含完整的事务回滚机制
```

---

## 项目开发及发布相关

### 开发

```bash
# 克隆项目
git clone https://github.com/guanjiang1106/youchen.git

# 进入项目根目录
cd youchen
```

#### 前端

```bash
# 进入前端目录
cd ruoyi-fastapi-frontend

# 安装依赖
npm install

# 建议不要直接使用 cnpm 安装依赖，会有各种诡异的 bug。可以通过如下操作解决 npm 下载速度慢的问题
npm install --registry=https://registry.npmmirror.com

# 启动服务
npm run dev
```

#### 移动端

```bash
# 进入移动端目录
cd ruoyi-fastapi-app

# 安装依赖
npm install -g yarn
yarn

# 启动 H5
yarn dev:h5

# 启动微信小程序
yarn dev:mp-weixin
```



#### 后端

```bash
# 进入后端目录
cd ruoyi-fastapi-backend

# 如果使用的是MySQL数据库，请执行以下命令安装项目依赖环境
pip3 install -r requirements.txt
# 如果使用的是PostgreSQL数据库，请执行以下命令安装项目依赖环境
pip3 install -r requirements-pg.txt

# 配置环境
在.env.dev文件中配置开发环境的数据库和redis

# 运行sql文件
1.新建数据库ruoyi-fastapi(默认，可修改)
2.如果使用的是MySQL数据库，使用命令或数据库连接工具运行sql文件夹下的ruoyi-fastapi.sql；如果使用的是PostgreSQL数据库，使用命令或数据库连接工具运行sql文件夹下的ruoyi-fastapi-pg.sql

# 运行后端
python3 app.py --env=dev
```

#### 访问

```bash
# 默认账号密码
账号：admin
密码：admin123

# 浏览器访问
地址：http://localhost:80
```

### 发布

#### 前端

```bash
# 构建测试环境
npm run build:stage

# 构建生产环境
npm run build:prod
```

#### 后端

```bash
# 配置环境
在.env.prod文件中配置生产环境的数据库和redis

# 运行后端
python3 app.py --env=prod
```

### Docker Compose部署方式

> ⚠️ **警告：** 默认未做数据持久化配置，请注意数据备份或自行配置持久化

#### MySQL版本

```bash
docker compose -f docker-compose.my.yml up -d --build
```

#### PostgreSQL版本

```bash
docker compose -f docker-compose.pg.yml up -d --build
```

